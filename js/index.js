(function() {
  var App;

  window.App = (function() {
    class App {
      constructor() {
        var fb, lin, plus, twt;
        this.init = this.init.bind(this);
        this.update = this.update.bind(this);
        this.renderScene = this.renderScene.bind(this);
        this.resize = this.resize.bind(this);

      }

      init() {


        this.scene = new THREE.Scene();
	this.camera = new THREE.PerspectiveCamera(70, 1, 1, 1000);
        this.camera.position.z = 7;
        this.camera.position.y = 1;
        console.log(this.camera);
        this.renderer = new THREE.WebGLRenderer({
                alpha: true,
                canvas: document.querySelector("canvas")
              });
        this.renderer.autoResize = true;
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.camera.lookAt(new THREE.Vector3());
	document.body.appendChild(this.renderer.domElement);
        this.terrain = new Terrain(this.scene);
        this.scene.add(this.terrain.plane_mesh);


        return this.update();
      }



     update() {
        requestAnimationFrame(this.update);
        this.terrain.update();
        return this.renderScene();
      }

      renderScene() {
        return this.renderer.render(this.scene, this.camera);
      }

      resize(stageWidth, stageHeight) {
        this.camera.aspect = stageWidth / stageHeight;
        this.camera.updateProjectionMatrix();
        return this.renderer.setSize(stageWidth, stageHeight);
      }

    };


    App.prototype.canvasGL = null;

    App.prototype.container = null;

    App.prototype.scene = null;

    App.prototype.camera = null;

    App.prototype.renderer = null;

    App.prototype.geometry = null;

    App.prototype.material = null;

    App.prototype.mesh = null;

    App.prototype.gui = null;

    App.prototype.terrain = null;

    App.prototype.composer = null;

    App.prototype.render_pass = null;

    App.prototype.fxaa_pass = null;

    App.prototype.posteffect = false;

    App.prototype.meteo = null;

    App.prototype.skybox = null;



    return App;

  }).call(this);

  window.Terrain = (function() {
    class Terrain {
      constructor(scene) {
        this.init = this.init.bind(this);
        this.initGUI = this.initGUI.bind(this);
        this.buildPlanes = this.buildPlanes.bind(this);
        this.update = this.update.bind(this);
        this.scene = scene;
        this.init();

      }

      init() {
        this.uniforms = {
          time: {
            type: "f",
            value: 0.0
          },
          speed: {
            type: "f",
            value: this.options.speed
          },
          elevation: {
            type: "f",
            value: this.options.elevation
          },
          noise_range: {
            type: "f",
            value: this.options.noise_range
          },
          offset: {
            type: "f",
            value: this.options.elevation
          },
          perlin_passes: {
            type: "f",
            value: this.options.perlin_passes
          },
          sombrero_amplitude: {
            type: "f",
            value: this.options.sombrero_amplitude
          },
          sombrero_frequency: {
            type: "f",
            value: this.options.sombrero_frequency
          },
          line_color: {
            type: "c",
            value: new THREE.Color(this.options.wireframe_color)
          }
        };
        this.buildPlanes(this.options.segments);
      }

      initGUI() {
        this.gui = new dat.GUI();
        this.gui.values = {};
        this.gui.values.speed = this.gui.add(this.options, 'speed', -5, 5).step(0.01);
        this.gui.values.segments = this.gui.add(this.options, 'segments', 20, 800).step(1);
        this.gui.values.perlin_passes = this.gui.add(this.options, 'perlin_passes', 1, 3).step(1);
        this.gui.values.elevation = this.gui.add(this.options, 'elevation', -10, 10).step(0.01);
        this.gui.values.noise_range = this.gui.add(this.options, 'noise_range', -10, 10).step(0.01);
        this.gui.values.sombrero_amplitude = this.gui.add(this.options, 'sombrero_amplitude', -5, 5).step(0.1);
        this.gui.values.sombrero_frequency = this.gui.add(this.options, 'sombrero_frequency', 0, 100).step(0.1);
        this.gui.values.wireframe_color = this.gui.addColor(this.options, 'wireframe_color');
        this.gui.values.wireframe = this.gui.add(this.options, 'wireframe');
        this.gui.values.floor_visible = this.gui.add(this.options, 'floor_visible');
        this.gui.values.elevation.onChange((value) => {
          this.uniforms.elevation.value = value;
        });
        this.gui.values.wireframe.onChange((value) => {
          this.plane_material.wireframe = value;
        });
        this.gui.values.floor_visible.onChange((value) => {
          this.groundMaterial.visible = value;
        });
        this.gui.values.noise_range.onChange((value) => {
          this.uniforms.noise_range.value = value;
        });
        this.gui.values.speed.onChange((value) => {
          this.uniforms.speed.value = value;
        });
        this.gui.values.perlin_passes.onChange((value) => {
          this.uniforms.perlin_passes.value = value;
        });
        this.gui.values.sombrero_amplitude.onChange((value) => {
          this.uniforms.sombrero_amplitude.value = value;
        });
        this.gui.values.sombrero_frequency.onChange((value) => {
          this.uniforms.sombrero_frequency.value = value;
        });
        this.gui.values.wireframe_color.onChange((value) => {
          console.log('value');
          this.uniforms.line_color.value = new THREE.Color(value);
        });
        return this.gui.values.segments.onFinishChange((value) => {
          this.scene.remove(this.plane_mesh);
          this.buildPlanes(value);
          this.scene.add(this.plane_mesh);
        });
      }



      buildPlanes(segments) {
        this.plane_geometry = new THREE.PlaneBufferGeometry(20, 20, segments, segments);
        this.plane_material = new THREE.ShaderMaterial({
          vertexShader: document.getElementById('shader-vertex-terrain-perlinsombrero').textContent,
          fragmentShader: document.getElementById('shader-fragment-terrain').textContent,
          wireframe: this.options.wireframe,
          wireframeLinewidth: 1,
          transparent: true,
          uniforms: this.uniforms,
        });
        this.groundMaterial = new THREE.MeshBasicMaterial({
          color: 0xFFFFFF,
          specular: 0x050505

        });

        this.groundMaterial.color.setHex( 0xffffff );
        this.materials = [this.groundMaterial, this.plane_material];
        this.plane_mesh = THREE.SceneUtils.createMultiMaterialObject(this.plane_geometry, this.materials);
        this.plane_mesh.rotation.x = -Math.PI / 2;
        return this.plane_mesh.position.y = -0.5;
      }

      update() {
        return this.plane_material.uniforms['time'].value = this.clock.getElapsedTime();
      }

    };



    Terrain.prototype.uniforms = null;

    Terrain.prototype.plane_mesh = null;

    Terrain.prototype.plane_geometry = null;

    Terrain.prototype.groundMaterial = null;

    Terrain.prototype.clock = new THREE.Clock(true);

    Terrain.prototype.options = {
      elevation: 1,
      noise_range: 2.14,
      sombrero_amplitude: 0.6,
      sombrero_frequency: 5.0,
      speed: 0.5,
      segments: 300,
      wireframe_color: '#33ffa8',
      perlin_passes: 1,
      wireframe: true,
    };

    Terrain.prototype.scene = null;

    return Terrain;

  }).call(this);

  App = new window.App();

  App.init();


}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQSxNQUFBOztFQUFNLE1BQU0sQ0FBQztJQUFiLE1BQUEsSUFBQTtNQW1DSSxXQUFhLENBQUEsQ0FBQTtBQUVULFlBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7WUErQkosQ0FBQSxXQUFBLENBQUE7WUFpQ0EsQ0FBQSxhQUFBLENBQUE7WUFVQSxDQUFBLGtCQUFBLENBQUE7WUFLQSxDQUFBLGFBQUEsQ0FBQTtRQS9FSSxFQUFBLEdBQUssUUFBUSxDQUFDLGNBQVQsQ0FBd0IsVUFBeEI7UUFDTCxHQUFBLEdBQU0sUUFBUSxDQUFDLGNBQVQsQ0FBd0IsU0FBeEI7UUFDTixHQUFBLEdBQU0sUUFBUSxDQUFDLGNBQVQsQ0FBd0IsVUFBeEI7UUFDTixJQUFBLEdBQU8sUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBeEI7UUFFUCxFQUFFLENBQUMsZ0JBQUgsQ0FBb0IsT0FBcEIsRUFBNkIsQ0FBQSxDQUFBLEdBQUE7aUJBRXpCLE1BQU0sQ0FBQyxJQUFQLENBQVkseUNBQVosRUFBdUQsUUFBdkQ7UUFGeUIsQ0FBN0IsRUFJRSxLQUpGO1FBTUEsR0FBRyxDQUFDLGdCQUFKLENBQXFCLE9BQXJCLEVBQThCLENBQUEsQ0FBQSxHQUFBO2lCQUUxQixNQUFNLENBQUMsSUFBUCxDQUFZLDhCQUFaLEVBQTRDLFFBQTVDO1FBRjBCLENBQTlCLEVBSUUsS0FKRjtRQU1BLEdBQUcsQ0FBQyxnQkFBSixDQUFxQixPQUFyQixFQUE4QixDQUFBLENBQUEsR0FBQTtpQkFFMUIsTUFBTSxDQUFDLElBQVAsQ0FBWSxtRkFBWixFQUFpRyxRQUFqRztRQUYwQixDQUE5QixFQUlFLEtBSkY7UUFPQSxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsT0FBdEIsRUFBK0IsQ0FBQSxDQUFBLEdBQUE7aUJBRTNCLE1BQU0sQ0FBQyxJQUFQLENBQVksd0RBQVosRUFBc0UsUUFBdEU7UUFGMkIsQ0FBL0IsRUFJRSxLQUpGO01BMUJTOztNQWlDYixJQUFNLENBQUEsQ0FBQTtRQUdGLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUMsS0FBVixDQUFBO1FBRVQsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFJLEtBQUssQ0FBQyxpQkFBVixDQUE2QixFQUE3QixFQUFpQyxNQUFNLENBQUMsVUFBUCxHQUFvQixNQUFNLENBQUMsV0FBNUQsRUFBeUUsR0FBekUsRUFBOEUsTUFBOUU7UUFFVixPQUFPLENBQUMsR0FBUixDQUFZLElBQUMsQ0FBQSxNQUFiO1FBRUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBakIsR0FBc0I7UUFFdEIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBakIsR0FBc0I7UUFFdEIsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFJLEtBQUssQ0FBQyxhQUFWLENBQXlCO1VBQUUsS0FBQSxFQUFRLE1BQU0sQ0FBQyxVQUFqQjtVQUE2QixNQUFBLEVBQVMsTUFBTSxDQUFDLFdBQTdDO1VBQTBELEtBQUEsRUFBTSxDQUFoRTtVQUFtRSxTQUFBLEVBQVc7UUFBOUUsQ0FBekI7UUFFWixJQUFDLENBQUEsUUFBUSxDQUFDLE9BQVYsQ0FBa0IsTUFBTSxDQUFDLFVBQXpCLEVBQXFDLE1BQU0sQ0FBQyxXQUE1QztRQUVBLElBQUMsQ0FBQSxTQUFELEdBQWEsUUFBUSxDQUFDLGFBQVQsQ0FBd0IsS0FBeEI7UUFFYixJQUFDLENBQUEsU0FBUyxDQUFDLEVBQVgsR0FBZ0I7UUFFaEIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxXQUFYLENBQXdCLElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBbEM7UUFFQSxJQUFDLENBQUEsTUFBTSxDQUFDLE1BQVIsQ0FBZSxJQUFJLEtBQUssQ0FBQyxPQUFWLENBQUEsQ0FBZjtRQUVBLFFBQVEsQ0FBQyxjQUFULENBQXdCLFlBQXhCLENBQXFDLENBQUMsV0FBdEMsQ0FBbUQsSUFBQyxDQUFBLFNBQXBEO1FBRUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFJLE9BQUosQ0FBWSxJQUFDLENBQUEsS0FBYjtRQUVYLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxPQUFPLENBQUMsVUFBcEI7ZUFFQSxJQUFDLENBQUEsTUFBRCxDQUFBO01BL0JFOztNQWlDTixNQUFRLENBQUEsQ0FBQTtRQUVKLHFCQUFBLENBQXNCLElBQUMsQ0FBQSxNQUF2QjtRQUVBLElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBVCxDQUFBO2VBRUEsSUFBQyxDQUFBLFdBQUQsQ0FBQTtNQU5JOztNQVVSLFdBQWEsQ0FBQSxDQUFBO2VBRVQsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLENBQWtCLElBQUMsQ0FBQSxLQUFuQixFQUEwQixJQUFDLENBQUEsTUFBM0I7TUFGUzs7TUFLYixNQUFPLENBQUMsVUFBRCxFQUFhLFdBQWIsQ0FBQTtRQUlILElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBUixHQUFpQixVQUFBLEdBQWE7UUFFOUIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxzQkFBUixDQUFBO2VBRUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxPQUFWLENBQW1CLFVBQW5CLEVBQStCLFdBQS9CO01BUkc7O0lBcEhYOztrQkFFSSxRQUFBLEdBQWM7O2tCQUVkLFNBQUEsR0FBYzs7a0JBRWQsS0FBQSxHQUFjOztrQkFFZCxNQUFBLEdBQWM7O2tCQUVkLFFBQUEsR0FBYzs7a0JBRWQsUUFBQSxHQUFjOztrQkFFZCxRQUFBLEdBQWM7O2tCQUVkLElBQUEsR0FBYzs7a0JBRWQsR0FBQSxHQUFjOztrQkFFZCxPQUFBLEdBQWM7O2tCQUVkLFFBQUEsR0FBYzs7a0JBRWQsV0FBQSxHQUFjOztrQkFFZCxTQUFBLEdBQWM7O2tCQUVkLFVBQUEsR0FBYzs7a0JBRWQsS0FBQSxHQUFjOztrQkFFZCxNQUFBLEdBQWM7Ozs7OztFQWlHWixNQUFNLENBQUM7SUFBYixNQUFBLFFBQUE7TUFzQ0ksV0FBWSxDQUFDLEtBQUQsQ0FBQTtZQU1aLENBQUEsV0FBQSxDQUFBO1lBcURBLENBQUEsY0FBQSxDQUFBO1lBaUdBLENBQUEsa0JBQUEsQ0FBQTtZQTRDQSxDQUFBLGFBQUEsQ0FBQTtRQXRNSSxJQUFDLENBQUEsS0FBRCxHQUFTO1FBRVQsSUFBQyxDQUFBLElBQUQsQ0FBQTtNQUpROztNQU1aLElBQU0sQ0FBQSxDQUFBO1FBSUYsSUFBQyxDQUFBLFFBQUQsR0FDRTtVQUFBLElBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPO1VBRFAsQ0FERjtVQUlBLEtBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7VUFEaEIsQ0FMRjtVQVFBLFNBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7VUFEaEIsQ0FURjtVQVlBLFdBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7VUFEaEIsQ0FiRjtVQWdCQSxNQUFBLEVBQ0U7WUFBQSxJQUFBLEVBQU0sR0FBTjtZQUNBLEtBQUEsRUFBTyxJQUFDLENBQUEsT0FBTyxDQUFDO1VBRGhCLENBakJGO1VBb0JBLGFBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7VUFEaEIsQ0FyQkY7VUF3QkEsa0JBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7VUFEaEIsQ0F6QkY7VUE0QkEsa0JBQUEsRUFDRTtZQUFBLElBQUEsRUFBTSxHQUFOO1lBQ0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7VUFEaEIsQ0E3QkY7VUFnQ0EsVUFBQSxFQUNFO1lBQUEsSUFBQSxFQUFNLEdBQU47WUFDQSxLQUFBLEVBQU8sSUFBSSxLQUFLLENBQUMsS0FBVixDQUFnQixJQUFDLENBQUEsT0FBTyxDQUFDLGVBQXpCO1VBRFA7UUFqQ0Y7UUF5Q0YsSUFBQyxDQUFBLFdBQUQsQ0FBYSxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQXRCO2VBSUEsSUFBQyxDQUFBLE9BQUQsQ0FBQTtNQWxERTs7TUFxRE4sT0FBUSxDQUFBLENBQUE7UUFFSixJQUFDLENBQUEsR0FBRCxHQUFPLElBQUksR0FBRyxDQUFDLEdBQVIsQ0FBQTtRQUVQLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTCxHQUFjLENBQUE7UUFFZCxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFaLEdBQStCLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLElBQUMsQ0FBQSxPQUFWLEVBQWtCLE9BQWxCLEVBQTBCLENBQUMsQ0FBM0IsRUFBNkIsQ0FBN0IsQ0FBK0IsQ0FBQyxJQUFoQyxDQUFxQyxJQUFyQztRQUUvQixJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFaLEdBQStCLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLElBQUMsQ0FBQSxPQUFWLEVBQWtCLFVBQWxCLEVBQTZCLEVBQTdCLEVBQWdDLEdBQWhDLENBQW9DLENBQUMsSUFBckMsQ0FBMEMsQ0FBMUM7UUFFL0IsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsYUFBWixHQUFnQyxJQUFDLENBQUEsR0FBRyxDQUFDLEdBQUwsQ0FBUyxJQUFDLENBQUEsT0FBVixFQUFrQixlQUFsQixFQUFrQyxDQUFsQyxFQUFvQyxDQUFwQyxDQUFzQyxDQUFDLElBQXZDLENBQTRDLENBQTVDO1FBRWhDLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVosR0FBd0IsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLE9BQVYsRUFBa0IsV0FBbEIsRUFBOEIsQ0FBQyxFQUEvQixFQUFrQyxFQUFsQyxDQUFxQyxDQUFDLElBQXRDLENBQTJDLElBQTNDO1FBRXhCLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVosR0FBMkIsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLE9BQVYsRUFBa0IsYUFBbEIsRUFBZ0MsQ0FBQyxFQUFqQyxFQUFvQyxFQUFwQyxDQUF1QyxDQUFDLElBQXhDLENBQTZDLElBQTdDO1FBRTNCLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLGtCQUFaLEdBQXFDLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLElBQUMsQ0FBQSxPQUFWLEVBQWtCLG9CQUFsQixFQUF1QyxDQUFDLENBQXhDLEVBQTBDLENBQTFDLENBQTRDLENBQUMsSUFBN0MsQ0FBa0QsR0FBbEQ7UUFFckMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsa0JBQVosR0FBcUMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLE9BQVYsRUFBa0Isb0JBQWxCLEVBQXVDLENBQXZDLEVBQXlDLEdBQXpDLENBQTZDLENBQUMsSUFBOUMsQ0FBbUQsR0FBbkQ7UUFFckMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsZUFBWixHQUFrQyxJQUFDLENBQUEsR0FBRyxDQUFDLFFBQUwsQ0FBYyxJQUFDLENBQUEsT0FBZixFQUF1QixpQkFBdkI7UUFJbEMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBWixHQUF3QixJQUFDLENBQUEsR0FBRyxDQUFDLEdBQUwsQ0FBUyxJQUFDLENBQUEsT0FBVixFQUFtQixXQUFuQjtRQUV4QixJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxhQUFaLEdBQTRCLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLElBQUMsQ0FBQSxPQUFWLEVBQW1CLGVBQW5CO1FBSTVCLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUF0QixDQUErQixDQUFDLEtBQUQsQ0FBQSxHQUFBO1VBRTNCLElBQUMsQ0FBQSxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQXBCLEdBQTRCO1FBRkQsQ0FBL0I7UUFPQSxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBdEIsQ0FBK0IsQ0FBQyxLQUFELENBQUEsR0FBQTtVQUUzQixJQUFDLENBQUEsY0FBYyxDQUFDLFNBQWhCLEdBQTRCO1FBRkQsQ0FBL0I7UUFNQSxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsUUFBMUIsQ0FBbUMsQ0FBQyxLQUFELENBQUEsR0FBQTtVQUUvQixJQUFDLENBQUEsY0FBYyxDQUFDLE9BQWhCLEdBQTBCO1FBRkssQ0FBbkM7UUFRQSxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBeEIsQ0FBaUMsQ0FBQyxLQUFELENBQUEsR0FBQTtVQUU3QixJQUFDLENBQUEsUUFBUSxDQUFDLFdBQVcsQ0FBQyxLQUF0QixHQUE4QjtRQUZELENBQWpDO1FBTUEsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQWxCLENBQTJCLENBQUMsS0FBRCxDQUFBLEdBQUE7VUFFdkIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBaEIsR0FBd0I7UUFGRCxDQUEzQjtRQU1BLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUExQixDQUFtQyxDQUFDLEtBQUQsQ0FBQSxHQUFBO1VBRS9CLElBQUMsQ0FBQSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQXhCLEdBQWdDO1FBRkQsQ0FBbkM7UUFNQSxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxRQUEvQixDQUF3QyxDQUFDLEtBQUQsQ0FBQSxHQUFBO1VBRXBDLElBQUMsQ0FBQSxRQUFRLENBQUMsa0JBQWtCLENBQUMsS0FBN0IsR0FBcUM7UUFGRCxDQUF4QztRQU1BLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFFBQS9CLENBQXdDLENBQUMsS0FBRCxDQUFBLEdBQUE7VUFFcEMsSUFBQyxDQUFBLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxLQUE3QixHQUFxQztRQUZELENBQXhDO1FBUUEsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLFFBQTVCLENBQXFDLENBQUMsS0FBRCxDQUFBLEdBQUE7VUFDakMsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaO1VBQ0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxVQUFVLENBQUMsS0FBckIsR0FBNkIsSUFBSSxLQUFLLENBQUMsS0FBVixDQUFnQixLQUFoQjtRQUZJLENBQXJDO2VBS0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQXJCLENBQW9DLENBQUMsS0FBRCxDQUFBLEdBQUE7VUFFaEMsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLENBQWMsSUFBQyxDQUFBLFVBQWY7VUFFQSxJQUFDLENBQUEsV0FBRCxDQUFhLEtBQWI7VUFFQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsVUFBWjtRQU5nQyxDQUFwQztNQXhGSTs7TUFpR1IsV0FBWSxDQUFDLFFBQUQsQ0FBQTtRQUlSLElBQUMsQ0FBQSxjQUFELEdBQWtCLElBQUksS0FBSyxDQUFDLG1CQUFWLENBQThCLEVBQTlCLEVBQWlDLEVBQWpDLEVBQW9DLFFBQXBDLEVBQTZDLFFBQTdDO1FBRWxCLElBQUMsQ0FBQSxjQUFELEdBQWtCLElBQUksS0FBSyxDQUFDLGNBQVYsQ0FBeUI7VUFFdkMsWUFBQSxFQUFxQixRQUFRLENBQUMsY0FBVCxDQUF3QixzQ0FBeEIsQ0FBK0QsQ0FBQyxXQUY5QztVQUl2QyxjQUFBLEVBQXFCLFFBQVEsQ0FBQyxjQUFULENBQXdCLHlCQUF4QixDQUFrRCxDQUFDLFdBSmpDO1VBTXZDLFNBQUEsRUFBcUIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQU5TO1VBUXZDLGtCQUFBLEVBQXFCLENBUmtCO1VBVXZDLFdBQUEsRUFBcUIsSUFWa0I7VUFZdkMsUUFBQSxFQUFxQixJQUFDLENBQUE7UUFaaUIsQ0FBekI7UUFrQmxCLElBQUMsQ0FBQSxjQUFELEdBQWtCLElBQUksS0FBSyxDQUFDLGlCQUFWLENBQTZCO1VBQUUsT0FBQSxFQUFTLFFBQVg7VUFBcUIsS0FBQSxFQUFPLFFBQTVCO1VBQXNDLFFBQUEsRUFBVTtRQUFoRCxDQUE3QjtRQUVsQixJQUFDLENBQUEsY0FBYyxDQUFDLEtBQUssQ0FBQyxNQUF0QixDQUE4QixLQUE5QixFQUFxQyxDQUFyQyxFQUF3QyxJQUF4QztRQUlBLElBQUMsQ0FBQSxTQUFELEdBQWEsQ0FFRCxJQUFDLENBQUEsY0FGQSxFQUlELElBQUMsQ0FBQSxjQUpBO1FBT2IsSUFBQyxDQUFBLFVBQUQsR0FBYyxLQUFLLENBQUMsVUFBVSxDQUFDLHlCQUFqQixDQUE0QyxJQUFDLENBQUEsY0FBN0MsRUFBNkQsSUFBQyxDQUFBLFNBQTlEO1FBRWQsSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBckIsR0FBeUIsQ0FBRSxJQUFJLENBQUMsRUFBUCxHQUFZO2VBRXJDLElBQUMsQ0FBQSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQXJCLEdBQXlCLENBQUM7TUF6Q2xCOztNQTRDWixNQUFRLENBQUEsQ0FBQTtlQUVKLElBQUMsQ0FBQyxjQUFjLENBQUMsUUFBUyxDQUFBLE1BQUEsQ0FBTyxDQUFDLEtBQWxDLEdBQTBDLElBQUMsQ0FBQSxLQUFLLENBQUMsY0FBUCxDQUFBO01BRnRDOztJQTlPWjs7c0JBRUksUUFBQSxHQUEwQjs7c0JBRTFCLFVBQUEsR0FBMEI7O3NCQUUxQixjQUFBLEdBQTBCOztzQkFFMUIsY0FBQSxHQUEwQjs7c0JBRTFCLEtBQUEsR0FBMkIsSUFBSSxLQUFLLENBQUMsS0FBVixDQUFnQixJQUFoQjs7c0JBRTNCLE9BQUEsR0FBVTtNQUVGLFNBQUEsRUFBWSxDQUZWO01BSUYsV0FBQSxFQUFlLElBSmI7TUFNRixrQkFBQSxFQUFxQixHQU5uQjtNQVFGLGtCQUFBLEVBQXFCLElBUm5CO01BVUYsS0FBQSxFQUFtQixHQVZqQjtNQVlGLFFBQUEsRUFBbUIsR0FaakI7TUFjRixlQUFBLEVBQXNCLFNBZHBCO01BZ0JGLGFBQUEsRUFBbUIsQ0FoQmpCO01Ba0JGLFNBQUEsRUFBbUIsSUFsQmpCO01Bb0JGLGFBQUEsRUFBbUI7SUFwQmpCOztzQkF3QlYsS0FBQSxHQUFROzs7Ozs7RUFtTlosR0FBQSxHQUFNLElBQUksTUFBTSxDQUFDLEdBQVgsQ0FBQTs7RUFDTixHQUFHLENBQUMsSUFBSixDQUFBO0FBelhBIiwic291cmNlc0NvbnRlbnQiOlsiXG5jbGFzcyB3aW5kb3cuQXBwIFxuXG4gICAgY2FudmFzR0wgICAgOiBudWxsXG5cbiAgICBjb250YWluZXIgICA6IG51bGxcblxuICAgIHNjZW5lICAgICAgIDogbnVsbFxuXG4gICAgY2FtZXJhICAgICAgOiBudWxsXG5cbiAgICByZW5kZXJlciAgICA6IG51bGxcblxuICAgIGdlb21ldHJ5ICAgIDogbnVsbFxuXG4gICAgbWF0ZXJpYWwgICAgOiBudWxsXG5cbiAgICBtZXNoICAgICAgICA6IG51bGxcblxuICAgIGd1aSAgICAgICAgIDogbnVsbFxuXG4gICAgdGVycmFpbiAgICAgOiBudWxsXG5cbiAgICBjb21wb3NlciAgICA6IG51bGxcblxuICAgIHJlbmRlcl9wYXNzIDogbnVsbFxuXG4gICAgZnhhYV9wYXNzICAgOiBudWxsXG5cbiAgICBwb3N0ZWZmZWN0ICA6IGZhbHNlXG5cbiAgICBtZXRlbyAgICAgICA6IG51bGxcblxuICAgIHNreWJveCAgICAgIDogbnVsbFxuXG5cbiAgICBjb25zdHJ1Y3RvcjogLT5cblxuICAgICAgICBmYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYWNlYm9vaycpO1xuICAgICAgICB0d3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHdpdHRlcicpO1xuICAgICAgICBsaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua2VkaW4nKTtcbiAgICAgICAgcGx1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbHVzJyk7XG5cbiAgICAgICAgZmIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+XG5cbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL1BpZXJyZS5kZS5taWVsXCIsICdfYmxhbmsnKTtcblxuICAgICAgICAsIGZhbHNlKVxuXG4gICAgICAgIHR3dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT5cblxuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL3R3aXR0ZXIuY29tL1NhbXN5eXl5XCIsICdfYmxhbmsnKTtcblxuICAgICAgICAsIGZhbHNlKVxuXG4gICAgICAgIGxpbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT5cblxuICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vcHJvZmlsZS92aWV3P2lkPTE4MjQ0OTMyNCZ0cms9bmF2X3Jlc3BvbnNpdmVfdGFiX3Byb2ZpbGVcIiwgJ19ibGFuaycpO1xuXG4gICAgICAgICwgZmFsc2UpXG5cblxuICAgICAgICBwbHVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PlxuXG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHA6Ly9leHBlcmltZW50cy5jcm1hLm5pbmphL3JlcG9zL3NhbXVlbC1ob25pZ3N0ZWluL1wiLCAnX2JsYW5rJyk7XG5cbiAgICAgICAgLCBmYWxzZSlcblxuXG4gICAgaW5pdDogPT5cblxuXG4gICAgICAgIEBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXG4gICAgICAgIEBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDYwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwMDAgKTtcblxuICAgICAgICBjb25zb2xlLmxvZyBAY2FtZXJhXG5cbiAgICAgICAgQGNhbWVyYS5wb3NpdGlvbi56ID0gIDc7XG5cbiAgICAgICAgQGNhbWVyYS5wb3NpdGlvbi55ID0gIDE7XG5cbiAgICAgICAgQHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoIHsgd2lkdGg6ICB3aW5kb3cuaW5uZXJXaWR0aCwgaGVpZ2h0OiAgd2luZG93LmlubmVySGVpZ2h0LCBzY2FsZToxLCBhbnRpYWxpYXM6IGZhbHNlIH0pO1xuXG4gICAgICAgIEByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuXG4gICAgICAgIEBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xuXG4gICAgICAgIEBjb250YWluZXIuaWQgPSAnY2FudmFzR0wnO1xuXG4gICAgICAgIEBjb250YWluZXIuYXBwZW5kQ2hpbGQoIEByZW5kZXJlci5kb21FbGVtZW50ICk7XG5cbiAgICAgICAgQGNhbWVyYS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGVyaWVuY2UnKS5hcHBlbmRDaGlsZCggQGNvbnRhaW5lciApO1xuXG4gICAgICAgIEB0ZXJyYWluID0gbmV3IFRlcnJhaW4oQHNjZW5lKVxuXG4gICAgICAgIEBzY2VuZS5hZGQoQHRlcnJhaW4ucGxhbmVfbWVzaClcblxuICAgICAgICBAdXBkYXRlKClcblxuICAgIHVwZGF0ZTogPT5cblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoQHVwZGF0ZSlcblxuICAgICAgICBAdGVycmFpbi51cGRhdGUoKVxuXG4gICAgICAgIEByZW5kZXJTY2VuZSgpXG5cblxuXG4gICAgcmVuZGVyU2NlbmUgOj0+XG5cbiAgICAgICAgQHJlbmRlcmVyLnJlbmRlciggQHNjZW5lLCBAY2FtZXJhICk7XG5cblxuICAgIHJlc2l6ZTooc3RhZ2VXaWR0aCwgc3RhZ2VIZWlnaHQpID0+XG5cbiAgICAgICAgXG5cbiAgICAgICAgQGNhbWVyYS5hc3BlY3QgPSBzdGFnZVdpZHRoIC8gc3RhZ2VIZWlnaHQ7XG5cbiAgICAgICAgQGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cbiAgICAgICAgQHJlbmRlcmVyLnNldFNpemUoIHN0YWdlV2lkdGgsIHN0YWdlSGVpZ2h0ICk7XG5cblxuXG5cbmNsYXNzIHdpbmRvdy5UZXJyYWluXG5cbiAgICB1bmlmb3JtcyAgICAgICAgICAgICAgICA6IG51bGxcblxuICAgIHBsYW5lX21lc2ggICAgICAgICAgICAgIDogbnVsbFxuXG4gICAgcGxhbmVfZ2VvbWV0cnkgICAgICAgICAgOiBudWxsXG5cbiAgICBncm91bmRNYXRlcmlhbCAgICAgICAgICA6IG51bGxcblxuICAgIGNsb2NrICAgICAgICAgICAgICAgICAgIDogIG5ldyBUSFJFRS5DbG9jayh0cnVlKVxuXG4gICAgb3B0aW9ucyA6IHtcblxuICAgICAgICAgICAgZWxldmF0aW9uIDogMSxcblxuICAgICAgICAgICAgbm9pc2VfcmFuZ2UgIDogMi4xNCxcblxuICAgICAgICAgICAgc29tYnJlcm9fYW1wbGl0dWRlIDogMC42LFxuXG4gICAgICAgICAgICBzb21icmVyb19mcmVxdWVuY3kgOiAxMC4wLFxuXG4gICAgICAgICAgICBzcGVlZCAgICAgICAgICAgIDogMC44LFxuXG4gICAgICAgICAgICBzZWdtZW50cyAgICAgICAgIDogMzI0LFxuXG4gICAgICAgICAgICB3aXJlZnJhbWVfY29sb3IgICAgIDogJyNlMjVjZmUnLFxuXG4gICAgICAgICAgICBwZXJsaW5fcGFzc2VzICAgIDogMSxcblxuICAgICAgICAgICAgd2lyZWZyYW1lICAgICAgICA6IHRydWUsXG5cbiAgICAgICAgICAgIGZsb29yX3Zpc2libGUgICAgOiB0cnVlXG5cbiAgICAgICAgfVxuXG4gICAgc2NlbmUgOiBudWxsXG5cbiAgICBjb25zdHJ1Y3Rvcjooc2NlbmUpLT5cblxuICAgICAgICBAc2NlbmUgPSBzY2VuZVxuXG4gICAgICAgIEBpbml0KClcblxuICAgIGluaXQgOj0+XG5cblxuXG4gICAgICAgIEB1bmlmb3JtcyA9XG4gICAgICAgICAgdGltZTpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogMC4wXG5cbiAgICAgICAgICBzcGVlZDpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogQG9wdGlvbnMuc3BlZWRcblxuICAgICAgICAgIGVsZXZhdGlvbjpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogQG9wdGlvbnMuZWxldmF0aW9uXG5cbiAgICAgICAgICBub2lzZV9yYW5nZTpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogQG9wdGlvbnMubm9pc2VfcmFuZ2VcblxuICAgICAgICAgIG9mZnNldDpcbiAgICAgICAgICAgIHR5cGU6IFwiZlwiXG4gICAgICAgICAgICB2YWx1ZTogQG9wdGlvbnMuZWxldmF0aW9uXG5cbiAgICAgICAgICBwZXJsaW5fcGFzc2VzOlxuICAgICAgICAgICAgdHlwZTogXCJmXCJcbiAgICAgICAgICAgIHZhbHVlOiBAb3B0aW9ucy5wZXJsaW5fcGFzc2VzXG5cbiAgICAgICAgICBzb21icmVyb19hbXBsaXR1ZGU6XG4gICAgICAgICAgICB0eXBlOiBcImZcIlxuICAgICAgICAgICAgdmFsdWU6IEBvcHRpb25zLnNvbWJyZXJvX2FtcGxpdHVkZVxuXG4gICAgICAgICAgc29tYnJlcm9fZnJlcXVlbmN5OlxuICAgICAgICAgICAgdHlwZTogXCJmXCJcbiAgICAgICAgICAgIHZhbHVlOiBAb3B0aW9ucy5zb21icmVyb19mcmVxdWVuY3lcblxuICAgICAgICAgIGxpbmVfY29sb3I6XG4gICAgICAgICAgICB0eXBlOiBcImNcIlxuICAgICAgICAgICAgdmFsdWU6IG5ldyBUSFJFRS5Db2xvcihAb3B0aW9ucy53aXJlZnJhbWVfY29sb3IpXG5cblxuXG5cblxuXG4gICAgICAgIEBidWlsZFBsYW5lcyhAb3B0aW9ucy5zZWdtZW50cylcblxuICAgICAgIFxuXG4gICAgICAgIEBpbml0R1VJKClcblxuXG4gICAgaW5pdEdVSTooKSA9PlxuXG4gICAgICAgIEBndWkgPSBuZXcgZGF0LkdVSSgpO1xuXG4gICAgICAgIEBndWkudmFsdWVzID0ge31cblxuICAgICAgICBAZ3VpLnZhbHVlcy5zcGVlZCAgICAgICAgICAgID0gQGd1aS5hZGQoQG9wdGlvbnMsJ3NwZWVkJywtNSw1KS5zdGVwKDAuMDEpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLnNlZ21lbnRzICAgICAgICAgPSBAZ3VpLmFkZChAb3B0aW9ucywnc2VnbWVudHMnLDIwLDgwMCkuc3RlcCgxKTtcblxuICAgICAgICBAZ3VpLnZhbHVlcy5wZXJsaW5fcGFzc2VzICAgICA9IEBndWkuYWRkKEBvcHRpb25zLCdwZXJsaW5fcGFzc2VzJywxLDMpLnN0ZXAoMSk7XG5cbiAgICAgICAgQGd1aS52YWx1ZXMuZWxldmF0aW9uID0gQGd1aS5hZGQoQG9wdGlvbnMsJ2VsZXZhdGlvbicsLTEwLDEwKS5zdGVwKDAuMDEpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLm5vaXNlX3JhbmdlICA9IEBndWkuYWRkKEBvcHRpb25zLCdub2lzZV9yYW5nZScsLTEwLDEwKS5zdGVwKDAuMDEpO1xuXG4gICAgICAgIEBndWkudmFsdWVzLnNvbWJyZXJvX2FtcGxpdHVkZSAgICAgPSBAZ3VpLmFkZChAb3B0aW9ucywnc29tYnJlcm9fYW1wbGl0dWRlJywtNSw1KS5zdGVwKDAuMSk7XG5cbiAgICAgICAgQGd1aS52YWx1ZXMuc29tYnJlcm9fZnJlcXVlbmN5ICAgICA9IEBndWkuYWRkKEBvcHRpb25zLCdzb21icmVyb19mcmVxdWVuY3knLDAsMTAwKS5zdGVwKDAuMSk7XG5cbiAgICAgICAgQGd1aS52YWx1ZXMud2lyZWZyYW1lX2NvbG9yICAgICA9IEBndWkuYWRkQ29sb3IoQG9wdGlvbnMsJ3dpcmVmcmFtZV9jb2xvcicpO1xuXG4gIFxuXG4gICAgICAgIEBndWkudmFsdWVzLndpcmVmcmFtZSA9IEBndWkuYWRkKEBvcHRpb25zLCAnd2lyZWZyYW1lJyk7XG5cbiAgICAgICAgQGd1aS52YWx1ZXMuZmxvb3JfdmlzaWJsZSA9IEBndWkuYWRkKEBvcHRpb25zLCAnZmxvb3JfdmlzaWJsZScpO1xuXG5cblxuICAgICAgICBAZ3VpLnZhbHVlcy5lbGV2YXRpb24ub25DaGFuZ2UgKHZhbHVlKSA9PlxuXG4gICAgICAgICAgICBAdW5pZm9ybXMuZWxldmF0aW9uLnZhbHVlID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cblxuICAgICAgICBAZ3VpLnZhbHVlcy53aXJlZnJhbWUub25DaGFuZ2UgKHZhbHVlKSA9PlxuXG4gICAgICAgICAgICBAcGxhbmVfbWF0ZXJpYWwud2lyZWZyYW1lID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMuZmxvb3JfdmlzaWJsZS5vbkNoYW5nZSAodmFsdWUpID0+XG5cbiAgICAgICAgICAgIEBncm91bmRNYXRlcmlhbC52aXNpYmxlID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cblxuXG4gICAgICAgIEBndWkudmFsdWVzLm5vaXNlX3JhbmdlLm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHVuaWZvcm1zLm5vaXNlX3JhbmdlLnZhbHVlID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMuc3BlZWQub25DaGFuZ2UgKHZhbHVlKSA9PlxuXG4gICAgICAgICAgICBAdW5pZm9ybXMuc3BlZWQudmFsdWUgPSB2YWx1ZVxuXG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBAZ3VpLnZhbHVlcy5wZXJsaW5fcGFzc2VzLm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHVuaWZvcm1zLnBlcmxpbl9wYXNzZXMudmFsdWUgPSB2YWx1ZVxuXG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBAZ3VpLnZhbHVlcy5zb21icmVyb19hbXBsaXR1ZGUub25DaGFuZ2UgKHZhbHVlKSA9PlxuXG4gICAgICAgICAgICBAdW5pZm9ybXMuc29tYnJlcm9fYW1wbGl0dWRlLnZhbHVlID0gdmFsdWVcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgQGd1aS52YWx1ZXMuc29tYnJlcm9fZnJlcXVlbmN5Lm9uQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHVuaWZvcm1zLnNvbWJyZXJvX2ZyZXF1ZW5jeS52YWx1ZSA9IHZhbHVlXG5cbiAgICAgICAgICAgIHJldHVyblxuXG5cblxuICAgICAgICBAZ3VpLnZhbHVlcy53aXJlZnJhbWVfY29sb3Iub25DaGFuZ2UgKHZhbHVlKSA9PlxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVlJylcbiAgICAgICAgICAgIEB1bmlmb3Jtcy5saW5lX2NvbG9yLnZhbHVlID0gbmV3IFRIUkVFLkNvbG9yKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIEBndWkudmFsdWVzLnNlZ21lbnRzLm9uRmluaXNoQ2hhbmdlICh2YWx1ZSkgPT5cblxuICAgICAgICAgICAgQHNjZW5lLnJlbW92ZShAcGxhbmVfbWVzaClcblxuICAgICAgICAgICAgQGJ1aWxkUGxhbmVzKHZhbHVlKVxuXG4gICAgICAgICAgICBAc2NlbmUuYWRkKEBwbGFuZV9tZXNoKVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICBidWlsZFBsYW5lczooc2VnbWVudHMpPT5cblxuXG5cbiAgICAgICAgQHBsYW5lX2dlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoMjAsMjAsc2VnbWVudHMsc2VnbWVudHMpO1xuXG4gICAgICAgIEBwbGFuZV9tYXRlcmlhbCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7XG5cbiAgICAgICAgICAgIHZlcnRleFNoYWRlciAgICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFkZXItdmVydGV4LXRlcnJhaW4tcGVybGluc29tYnJlcm8nKS50ZXh0Q29udGVudCxcblxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXIgICAgIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoYWRlci1mcmFnbWVudC10ZXJyYWluJykudGV4dENvbnRlbnQsXG5cbiAgICAgICAgICAgIHdpcmVmcmFtZSAgICAgICAgICA6IEBvcHRpb25zLndpcmVmcmFtZSxcblxuICAgICAgICAgICAgd2lyZWZyYW1lTGluZXdpZHRoIDogMSxcblxuICAgICAgICAgICAgdHJhbnNwYXJlbnQgICAgICAgIDogdHJ1ZSxcblxuICAgICAgICAgICAgdW5pZm9ybXMgICAgICAgICAgIDogQHVuaWZvcm1zXG5cbiAgICAgICAgfSk7XG5cblxuXG4gICAgICAgIEBncm91bmRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCggeyBhbWJpZW50OiAweGZmZmZmZiwgY29sb3I6IDB4ZmZmZmZmLCBzcGVjdWxhcjogMHgwNTA1MDUgfSApXG5cbiAgICAgICAgQGdyb3VuZE1hdGVyaWFsLmNvbG9yLnNldEhTTCggMC4wOTUsIDEsIDAuNzUgKTtcblxuICAgICAgICBcblxuICAgICAgICBAbWF0ZXJpYWxzID0gW1xuXG4gICAgICAgICAgICAgICAgICAgIEBncm91bmRNYXRlcmlhbCxcblxuICAgICAgICAgICAgICAgICAgICBAcGxhbmVfbWF0ZXJpYWxcbiAgICAgICAgXVxuXG4gICAgICAgIEBwbGFuZV9tZXNoID0gVEhSRUUuU2NlbmVVdGlscy5jcmVhdGVNdWx0aU1hdGVyaWFsT2JqZWN0KCBAcGxhbmVfZ2VvbWV0cnksIEBtYXRlcmlhbHMgKTtcblxuICAgICAgICBAcGxhbmVfbWVzaC5yb3RhdGlvbi54ID0gLSBNYXRoLlBJIC8gMjtcblxuICAgICAgICBAcGxhbmVfbWVzaC5wb3NpdGlvbi55ID0gLTAuNTtcblxuXG4gICAgdXBkYXRlOiA9PlxuXG4gICAgICAgIEAucGxhbmVfbWF0ZXJpYWwudW5pZm9ybXNbJ3RpbWUnXS52YWx1ZSA9IEBjbG9jay5nZXRFbGFwc2VkVGltZSgpO1xuXG5cblxuXG5cblxuQXBwID0gbmV3IHdpbmRvdy5BcHAoKTtcbkFwcC5pbml0KCk7Il19
//# sourceURL=coffeescript
